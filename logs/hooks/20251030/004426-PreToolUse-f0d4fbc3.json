{"session_id":"f0d4fbc3-a5b1-443e-8264-7550e32cfe6a","transcript_path":"/home/thomas/.claude/projects/-home-thomas-Repositories-LangChangeWorkflows/f0d4fbc3-a5b1-443e-8264-7550e32cfe6a.jsonl","cwd":"/home/thomas/Repositories/LangChangeWorkflows","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Write","tool_input":{"file_path":"/home/thomas/Repositories/LangChangeWorkflows/MULTI_LANGUAGE.md","content":"# Multi-Language Project Support\n\nThe LangGraph PRP Workflow supports **any project type** - Python, Node.js, Go, Terraform, Rust, Java, etc.\n\n## Quick Start for Any Project\n\n```bash\n# From any project directory (Node, Go, Terraform, etc.)\ncd /path/to/your/project\n\n# Auto-detect and run\npython3 ~/Repositories/LangChangeWorkflows/examples/auto_detect_runner.py\n```\n\nThe auto-detect runner will:\n1. ✅ Detect your project type (Node, Go, Python, Terraform, etc.)\n2. ✅ Find your source and test directories automatically\n3. ✅ Run the appropriate coverage tools\n4. ✅ Apply correct validation rules\n\n## Supported Project Types\n\n| Type | Detection | Source Dirs | Test Dirs | Coverage Tool |\n|------|-----------|-------------|-----------|---------------|\n| **Node.js** | `package.json` | `src/`, `lib/` | `tests/`, `__tests__/` | `jest`, `vitest` |\n| **Go** | `go.mod` | `cmd/`, `internal/`, `pkg/` | `*_test.go` | `go test -cover` |\n| **Python** | `setup.py`, `pyproject.toml` | `src/`, `lib/`, `app/` | `tests/` | `pytest --cov` |\n| **Terraform** | `*.tf` | `modules/`, `*.tf` | `tests/`, `examples/` | `terratest`, `tfsec` |\n| **Rust** | `Cargo.toml` | `src/` | `tests/` | `cargo tarpaulin` |\n| **Java** | `pom.xml`, `build.gradle` | `src/main/java` | `src/test/java` | `jacoco` |\n\n## Project-Specific Examples\n\n### Node.js Project\n\n```bash\n# Your project structure\nmy-node-app/\n├── package.json\n├── src/\n│   └── index.ts\n├── tests/\n│   └── index.test.ts\n└── jest.config.js\n\n# Run workflow\ncd my-node-app\npython3 ~/Repositories/LangChangeWorkflows/examples/auto_detect_runner.py\n```\n\n**What it validates:**\n- ✅ 100% test coverage via Jest/Vitest\n- ✅ No mocks in `src/` (only in `tests/`)\n- ✅ All TypeScript/JavaScript tests passing\n\n### Go Project\n\n```bash\n# Your project structure (standard Go layout)\nmy-go-app/\n├── go.mod\n├── cmd/\n│   └── server/\n│       └── main.go\n├── internal/\n│   └── handler/\n│       ├── handler.go\n│       └── handler_test.go\n└── pkg/\n    └── utils/\n        ├── utils.go\n        └── utils_test.go\n\n# Run workflow\ncd my-go-app\npython3 ~/Repositories/LangChangeWorkflows/examples/auto_detect_runner.py\n```\n\n**What it validates:**\n- ✅ 100% test coverage via `go test -cover`\n- ✅ No mock libraries in production code\n- ✅ All `*_test.go` tests passing\n\n### Terraform Project\n\n```bash\n# Your project structure\nmy-terraform/\n├── main.tf\n├── variables.tf\n├── outputs.tf\n├── modules/\n│   └── vpc/\n│       └── main.tf\n└── tests/\n    └── terraform_test.go\n\n# Run workflow\ncd my-terraform\npython3 ~/Repositories/LangChangeWorkflows/examples/auto_detect_runner.py\n```\n\n**What it validates:**\n- ✅ Infrastructure tests via Terratest\n- ✅ Security scanning via tfsec/checkov\n- ✅ No hardcoded secrets\n\n## Custom Configuration\n\n### Option 1: Use Pre-Made Config\n\nCopy the appropriate config to your project:\n\n```bash\n# For Node.js\ncp ~/Repositories/LangChangeWorkflows/examples/project_configs/nodejs_project.yaml \\\n   .langgraph/config/gates.yaml\n\n# For Go\ncp ~/Repositories/LangChangeWorkflows/examples/project_configs/go_project.yaml \\\n   .langgraph/config/gates.yaml\n\n# For Terraform\ncp ~/Repositories/LangChangeWorkflows/examples/project_configs/terraform_project.yaml \\\n   .langgraph/config/gates.yaml\n```\n\n### Option 2: Create Custom Config\n\nCreate `.langgraph/config/gates.yaml` in your project:\n\n```yaml\nextends: \"~/.claude/langgraph/config/default_gates.yaml\"\n\nproject:\n  type: \"your-type\"\n  language: \"your-language\"\n\n  source_directories:\n    - \"your-src-dir/\"\n\n  test_directories:\n    - \"your-test-dir/\"\n\ngates:\n  gate_2_coverage:\n    coverage_command: \"your-coverage-command\"\n```\n\n## Coverage Tools by Language\n\n### Node.js/TypeScript\n\n**Jest:**\n```bash\nnpm test -- --coverage\n# or\njest --coverage\n```\n\n**Vitest:**\n```bash\nvitest run --coverage\n```\n\n**NYC (for Mocha):**\n```bash\nnyc mocha\n```\n\n### Go\n\n```bash\ngo test -coverprofile=coverage.out -covermode=atomic ./...\ngo tool cover -html=coverage.out\n```\n\n### Python\n\n```bash\npytest --cov=. --cov-report=html\n```\n\n### Terraform\n\n**Terratest (Go-based):**\n```bash\ncd tests/\ngo test -v\n```\n\n**Terraform-compliance:**\n```bash\nterraform-compliance -f tests/ -p .\n```\n\n### Rust\n\n```bash\ncargo tarpaulin --out Html\n```\n\n### Java\n\n**Maven:**\n```bash\nmvn clean test jacoco:report\n```\n\n**Gradle:**\n```bash\n./gradlew test jacocoTestReport\n```\n\n## Examples by Project Type\n\n### 1. Node.js Express API\n\n```bash\ncd ~/projects/my-express-api\npython3 ~/Repositories/LangChangeWorkflows/examples/auto_detect_runner.py\n```\n\nGate 2 will run: `jest --coverage` or `npm test -- --coverage`\n\n### 2. Go Microservice\n\n```bash\ncd ~/projects/my-go-service\npython3 ~/Repositories/LangChangeWorkflows/examples/auto_detect_runner.py\n```\n\nGate 2 will run: `go test -coverprofile=coverage.out ./...`\n\n### 3. Terraform Infrastructure\n\n```bash\ncd ~/projects/my-infra\npython3 ~/Repositories/LangChangeWorkflows/examples/auto_detect_runner.py\n```\n\nGate 2 will run: `cd tests && go test -v` (if using Terratest)\nGate 5 will run: `tfsec . && checkov -d .`\n\n## Troubleshooting\n\n### \"No test directories detected\"\n\n**Solution:** Create a tests directory:\n```bash\nmkdir tests\n# Add at least one test file\n```\n\n### \"Coverage tool not found\"\n\n**Node.js:**\n```bash\nnpm install --save-dev jest @types/jest\n# or\nnpm install --save-dev vitest @vitest/coverage-v8\n```\n\n**Go:**\n```bash\n# Coverage is built-in, no install needed\ngo test -cover ./...\n```\n\n**Python:**\n```bash\npip install pytest pytest-cov\n```\n\n### \"Project type not detected\"\n\nThe auto-detect runner will use Python defaults. You can:\n\n1. **Create a custom config** in `.langgraph/config/gates.yaml`\n2. **Add project indicator files** (e.g., `package.json` for Node)\n3. **Manually specify** project type in initial_state\n\n## Manual Project Type Override\n\n```python\nfrom prp_langgraph.workflows.base_prp_workflow import BasePRPWorkflow\n\nworkflow = BasePRPWorkflow()\n\nresult = workflow.execute(\n    prp_file=\"prp/feature.md\",\n    initial_state={\n        \"project_path\": \".\",\n        \"project_type\": \"nodejs\",  # Override auto-detection\n        \"source_directories\": [\"src\", \"lib\"],\n        \"test_directories\": [\"tests\"]\n    }\n)\n```\n\n## Next Steps\n\n1. **Test on your project:**\n   ```bash\n   cd /path/to/your/project\n   python3 ~/Repositories/LangChangeWorkflows/examples/auto_detect_runner.py\n   ```\n\n2. **Review results:** Check coverage, cost, and gate status\n\n3. **Customize config:** Create `.langgraph/config/gates.yaml` for your needs\n\n4. **Integrate with CI/CD:** Add to your GitHub Actions/GitLab CI\n\n---\n\n**The workflow adapts to YOUR project structure - no forced conventions!**\n"}}
