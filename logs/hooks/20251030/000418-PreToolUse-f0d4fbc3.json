{"session_id":"f0d4fbc3-a5b1-443e-8264-7550e32cfe6a","transcript_path":"/home/thomas/.claude/projects/-home-thomas-Repositories-LangChangeWorkflows/f0d4fbc3-a5b1-443e-8264-7550e32cfe6a.jsonl","cwd":"/home/thomas/Repositories/LangChangeWorkflows","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Write","tool_input":{"file_path":"/home/thomas/Repositories/LangChangeWorkflows/langgraph/config/default_thresholds.yaml","content":"# Default Quality Thresholds for PRP Workflows\n# These are the MANDATORY quality standards that CANNOT be lowered\n# Per CLAUDE.md: \"These thresholds are non-negotiable for life-critical development\"\n\nversion: \"1.0\"\n\n# Test Coverage Thresholds\ncoverage:\n  lines: 100                        # 100% line coverage MANDATORY\n  branches: 100                     # 100% branch coverage MANDATORY\n  functions: 100                    # 100% function coverage MANDATORY\n  statements: 100                   # 100% statement coverage MANDATORY\n\n  # Coverage must include ALL files\n  exclude_patterns: []              # NO exclusions allowed\n\n  # Enforcement\n  fail_under: 100                   # Build fails if < 100%\n  bypass_allowed: false             # NO bypass mechanism\n\n# Mutation Testing Thresholds\nmutation:\n  score_minimum: 95                 # â‰¥95% mutation score required\n  timeout_per_test: 10              # 10 seconds per mutant\n\n  # Mutation operators\n  operators:\n    - \"arithmetic\"                  # +, -, *, /, %\n    - \"comparison\"                  # <, >, <=, >=, ==, !=\n    - \"logical\"                     # and, or, not\n    - \"assignment\"                  # =, +=, -=, *=, /=\n    - \"return_values\"               # Return value mutations\n\n  # Enforcement\n  fail_under: 95\n  bypass_allowed: false\n\n# Mock Detection Thresholds\nmocks:\n  production_directories:\n    - \"src/\"\n    - \"lib/\"\n    - \"app/\"\n\n  test_directories:\n    - \"tests/\"\n    - \"test/\"\n    - \"spec/\"\n    - \"__tests__/\"\n\n  # Zero tolerance for mocks in production\n  max_mocks_in_production: 0\n\n  # Blocked patterns\n  blocked_imports:\n    - \"unittest.mock\"\n    - \"mock.Mock\"\n    - \"pytest.mock\"\n    - \"jest.mock\"\n    - \"sinon\"\n\n  blocked_calls:\n    - \"Mock(\"\n    - \"MagicMock(\"\n    - \"patch(\"\n    - \"mock(\"\n    - \"stub(\"\n    - \"spy(\"\n\n  # Enforcement\n  fail_on_detection: true\n  bypass_allowed: false\n\n# Security Thresholds\nsecurity:\n  # Severity levels that block merge\n  blocking_severities:\n    - \"critical\"\n    - \"high\"\n\n  # Allowed (must still be documented)\n  allowed_severities:\n    - \"medium\"\n    - \"low\"\n    - \"informational\"\n\n  # Maximum allowed issues by severity\n  max_issues:\n    critical: 0\n    high: 0\n    medium: 5                       # Must be documented with mitigation plan\n    low: 10                         # Must be documented\n\n  # Dependency scanning\n  outdated_dependencies:\n    max_major_versions_behind: 0    # Must be on latest major version\n    max_minor_versions_behind: 2    # Can be up to 2 minor versions behind\n    security_updates_required: true # Security updates are MANDATORY\n\n  # Enforcement\n  fail_on_critical_or_high: true\n  bypass_allowed: false\n\n# Production-Ready Thresholds\nproduction_ready:\n  # Stub detection\n  stubs:\n    max_stubs_allowed: 0\n    blocked_patterns:\n      - \"pass\"\n      - \"NotImplementedError\"\n      - \"TODO:\"\n      - \"FIXME:\"\n      - \"raise NotImplementedError\"\n      - \"return None  # stub\"\n\n  # Error handling\n  error_handling:\n    min_coverage_percentage: 100    # 100% of external calls wrapped\n    required_exception_types:\n      - \"Exception\"                 # Catch specific exceptions\n      - \"ValueError\"\n      - \"TypeError\"\n      - \"IOError\"\n    meaningful_error_messages: true # Error messages must be descriptive\n\n  # Logging\n  logging:\n    min_coverage_percentage: 80     # 80% of functions have logging\n    required_log_levels:\n      - \"ERROR\"                     # All errors logged\n      - \"WARNING\"                   # Warnings logged\n      - \"INFO\"                      # Key operations logged\n    structured_logging: true        # JSON structured logs required\n\n  # TODO/FIXME resolution\n  todos:\n    max_unresolved: 0\n    allowed_with_issue_number: true # \"TODO(#123): ...\" is allowed\n\n  # Completeness score\n  completeness:\n    min_score: 100                  # Perfect score required\n    scoring:\n      no_stubs: 30                  # 30 points\n      error_handling: 25            # 25 points\n      logging: 20                   # 20 points\n      no_todos: 15                  # 15 points\n      test_coverage: 10             # 10 points (validated by Gate 2)\n\n  # Enforcement\n  fail_under: 100\n  bypass_allowed: false\n\n# TDD Cycle Verification Thresholds\ntdd:\n  # RED-GREEN-REFACTOR pattern enforcement\n  require_red_before_green: true\n  require_green_before_refactor: true\n\n  # Commit message patterns\n  red_commit_patterns:\n    - \"RED:\"\n    - \"[RED]\"\n    - \"test:\"\n    - \"feat(test):\"\n\n  green_commit_patterns:\n    - \"GREEN:\"\n    - \"[GREEN]\"\n    - \"feat:\"\n    - \"implement:\"\n\n  refactor_commit_patterns:\n    - \"REFACTOR:\"\n    - \"[REFACTOR]\"\n    - \"refactor:\"\n    - \"chore(refactor):\"\n\n  # Enforcement\n  strict_ordering: true             # RED must come before GREEN\n  allow_skip_refactor: false        # REFACTOR is MANDATORY\n  bypass_allowed: false\n\n# Circuit Breaker Thresholds\ncircuit_breaker:\n  # Consecutive failure threshold\n  max_consecutive_failures: 15\n\n  # Recovery\n  reset_on_single_success: true     # One success resets counter\n  manual_reset_required: false      # Auto-reset allowed\n\n  # Escalation\n  notify_on_activation: true\n  require_human_intervention: true  # Human must approve continuation\n\n  # Enforcement\n  bypass_allowed: false\n\n# Cost Optimization Targets\ncost:\n  # Target savings through optimization\n  target_cost_reduction_percentage: 40  # 40% savings goal\n\n  # Per-gate cost targets (USD)\n  max_cost_per_gate:\n    gate_1_tdd: 0.03\n    gate_2_coverage: 0.05\n    gate_3_mock: 0.02\n    gate_4_mutation: 0.06\n    gate_5_security: 0.05\n    gate_6_production_ready: 0.04\n\n  # Total workflow cost target\n  max_cost_per_prp: 0.25            # $0.25 per PRP execution (optimized)\n\n  # Cache performance targets\n  cache_hit_rate_target: 60         # 60% cache hit rate goal\n\n# Retry and Timeout Limits\nlimits:\n  # Retry limits\n  max_retries_per_gate: 3           # 3-strike rule\n  max_retries_total: 15             # Total across all gates\n\n  # Timeouts\n  timeouts:\n    gate_validation: 600            # 10 minutes per gate\n    specialist_consultation: 300    # 5 minutes for specialist\n    total_workflow: 3600            # 1 hour total workflow timeout\n\n  # Rate limits\n  api_calls:\n    max_per_minute: 60\n    max_per_hour: 1000\n    max_per_day: 10000\n\n# Override Policy\noverrides:\n  # Thresholds that can be overridden per-project\n  overridable_thresholds:\n    - \"mutation.score_minimum\"      # Can be raised, not lowered\n    - \"security.max_issues.medium\"  # Can be lowered with justification\n    - \"production_ready.logging.min_coverage_percentage\"  # Can be adjusted\n\n  # Thresholds that CANNOT be overridden\n  non_overridable_thresholds:\n    - \"coverage.*\"                  # 100% coverage is MANDATORY\n    - \"mocks.max_mocks_in_production\"  # Zero mocks is MANDATORY\n    - \"security.blocking_severities\"   # Critical/High block is MANDATORY\n    - \"production_ready.stubs.max_stubs_allowed\"  # Zero stubs is MANDATORY\n    - \"circuit_breaker.max_consecutive_failures\"  # 15 failures is MANDATORY\n\n  # Override approval process\n  override_requires:\n    - \"2_of_3_maintainer_approval\"\n    - \"documented_justification\"\n    - \"risk_assessment\"\n    - \"retroactive_prp\"\n\n# Compliance Standards\ncompliance:\n  # Mandatory compliance frameworks\n  frameworks:\n    - \"NIST Cybersecurity Framework\"\n    - \"NIST 800-53 (Moderate Impact)\"\n    - \"NIST 800-218 (Secure SDLC)\"\n    - \"NIST 800-122 (PII Protection)\"\n\n  # Privacy standards\n  privacy:\n    - \"NIST Privacy Framework\"\n    - \"GDPR compliance (if applicable)\"\n    - \"CCPA compliance (if applicable)\"\n\n  # Audit requirements\n  audit:\n    maintain_complete_trail: true\n    log_all_decisions: true\n    track_all_overrides: true\n"}}
